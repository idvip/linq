!function(self){function getFunc(func,rtn){if(!func)return null;if("function"==typeof func)return func;var code="var tmpFunc = function(i,a){ var s=this;";return rtn&&(func="return "+func),code+=func+";}",eval(code),tmpFunc}function remove(a){return this.splice(a,1)}var ver="1.5.1";self.prototype.each=function(a,b){if(a=getFunc(a),!a)return!1;if(this.length<1)return!1;for(var d,c=0;d=this[c];c++)a.call(d,c,b);return b||this},self.prototype.sum=function(a,b){var c,e,d,f;for(a=getFunc(a,1),d=0;e=this[d];d++)f=a?a.call(e,d,b):e,c=c?c+f:f;return c},self.prototype.where=function(a,b){var c,e,d;for(a=getFunc(a,1),c=[],d=0;e=this[d];d++)a&&a.call(e,d,b)&&c.push(e);return c},self.prototype.single=function(a,b){a=getFunc(a,1);for(var d,c=0;d=this[c];c++)if(a&&a.call(d,c,b))return d},self.prototype.last=function(a,b){if(a=getFunc(a,1),!a)return this.length>0?this[this.length-1]:null;for(var d,c=this.length-1;d=this[c];c--)if(a.call(d,c,b))return d},self.prototype.first=function(a,b){if(a=getFunc(a,1),!a)return this.length>0?this[0]:null;for(var d,c=0;d=this[c];c++)if(a.call(d,c,b))return d},self.prototype.select=function(a,b){var c,e,d;if(a=getFunc(a,1),!a)return this;for(c=[],d=0;e=this[d];d++)c.push(a.call(e,d,b));return c},self.prototype.group=function(a,b){var c,d,f,e,g;if(a=getFunc(a,1),!a)return this;for(c={},d=[],e=0;f=this[e];e++)g=a.call(f,e,b),c[g]||(c[g]=[]),c[g].push(f);for(p in c)c[p].key=p,d.push(c[p]);return d},self.prototype.count=function(a){return func=getFunc(func,1),a?this.where(a).length:this.length},self.prototype.skip=function(a){return this.slice(a)},self.prototype.take=function(a){return this.slice(0,a)},self.prototype.limit=function(a,b){return b||(b=a,a=0),this.slice(a,a+b)},self.prototype.out=function(){console.log(this)},self.prototype.remove=function(a){var b,c;return"function"==typeof a||"string"==typeof a?this.remove(this.where(a)):a instanceof Array?(b=this,a.each(function(){remove.call(b,b.indexOf(this))})):(c="object"==typeof a?this.indexOf(a):a,remove.call(this,c)),this},self.prototype.orderBy=function(a){var b=("string"==typeof a?a.split(","):a).select(function(){var a=this.split(" ");return{by:a[1]||"asc",children:a[0].split(".")}}),c=function(a,b){var c=a;return b.children.each(function(){c=c[this]}),c},d=function(a,d){var f,e,g,h,i;for(e=0;f=b[e];e++)if(g=c(a,f),h=c(d,f),i=[],i[0]="asc"==f.by?1:0,i[1]="desc"==f.by?1:0,g!=h)return g>h?i[0]:i[1];return 0};return this.sort(d)},self.range=function(a,b){var c,d;for(a=a||0,b=b||100,c=[],d=a;b>=d;d++)c.push(d);return c},self.random=function(a,b,c){var d,e;for(b=b||0,c=c||100,c++,d=[],e=0;a>e;e++)d.push(parseInt(Math.random()*(c-b)+b));return d},self.new=function(a){return new Array(a)},self.linqVer=ver,self.linqAbout="Array linq "+ver+" by jun"}(Array);