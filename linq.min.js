!function(self){function getFunc(func,rtn){if(!func)return null;if("function"==typeof func)return func;var code="var tmpFunc = function(){";return rtn&&(func="return "+func),code+=func+";}",eval(code),tmpFunc}function remove(a){return this.splice(a,1)}var ver="1.5.1";self.prototype.each=function(a){if(a=getFunc(a),!a)return!1;if(this.length<1)return!1;for(var c,b=0;c=this[b];b++)a.call(c,b);return!0},self.prototype.sum=function(a){var b,d,c,e;for(a=getFunc(a,1),c=0;d=this[c];c++)e=a?a.call(d,c):d,b=b?b+e:e;return b},self.prototype.where=function(a){var b,d,c;for(a=getFunc(a,1),b=[],c=0;d=this[c];c++)a&&a.call(d,c)&&b.push(d);return b},self.prototype.single=function(a){a=getFunc(a,1);for(var c,b=0;c=this[b];b++)if(a&&a.call(c,b))return c},self.prototype.last=function(a){if(a=getFunc(a,1),!a)return this.length>0?this[this.length-1]:null;for(var c,b=this.length-1;c=this[b];b--)if(a.call(c,b))return c},self.prototype.first=function(a){if(a=getFunc(a,1),!a)return this.length>0?this[0]:null;for(var c,b=0;c=this[b];b++)if(a.call(c,b))return c},self.prototype.select=function(a){var b,d,c;if(a=getFunc(a,1),!a)return this;for(b=[],c=0;d=this[c];c++)b.push(a.call(d,c));return b},self.prototype.group=function(a){var b,c,e,d,f;if(a=getFunc(a,1),!a)return this;for(b={},c=[],d=0;e=this[d];d++)f=a.call(e,d),b[f]||(b[f]=[]),b[f].push(e);for(p in b)b[p].key=p,c.push(b[p]);return c},self.prototype.count=function(a){return func=getFunc(func,1),a?this.where(a).length:this.length},self.prototype.skip=function(a){return this.slice(a)},self.prototype.take=function(a){return this.slice(0,a)},self.prototype.limit=function(a,b){return b||(b=a,a=0),this.slice(a,a+b)},self.prototype.out=function(){console.log(this)},self.prototype.remove=function(a){var b,c;return"function"==typeof a||"string"==typeof a?this.remove(this.where(a)):a instanceof Array?(b=this,a.each(function(){remove.call(b,b.indexOf(this))})):(c="object"==typeof a?this.indexOf(a):a,remove.call(this,c)),this},self.prototype.orderBy=function(a){var b=("string"==typeof a?a.split(","):a).select(function(){var a=this.split(" ");return{by:a[1]||"asc",children:a[0].split(".")}}),c=function(a,b){var c=a;return b.children.each(function(){c=c[this]}),c},d=function(a,d){var f,e,g,h,i;for(e=0;f=b[e];e++)if(g=c(a,f),h=c(d,f),i=[],i[0]="asc"==f.by?1:0,i[1]="desc"==f.by?1:0,g!=h)return g>h?i[0]:i[1];return 0};return this.sort(d)},self.range=function(a,b){var c,d;for(a=a||0,b=b||100,c=[],d=a;b>=d;d++)c.push(d);return c},self.random=function(a,b,c){var d,e;for(b=b||0,c=c||100,c++,d=[],e=0;a>e;e++)d.push(parseInt(Math.random()*(c-b)+b));return d},self.new=function(a){return new Array(a)},self.linqVer=ver,self.linqAbout="Array linq "+ver+" by jun"}(Array);